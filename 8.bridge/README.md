# 桥接模式

## 前言

***GoF定义：将抽象部分与它的实现部分分离，使它们都可以独立地变化。***

桥接模式，在程序世界中，其实就是组合/聚合的代名词。为什么这么说呢？熟悉面向对象的我们都知道继承的好处，子类可以共享父类的很多属性、功能。但是，继承也会带来一个问题，那就是严重的耦合性。父类的修改多少都会对子类产生影响，甚至一个方法或属性的修改都有可能让所有子类都去修改一遍。这样就违背了开放封装原则。而桥接就是为了解决这个问题，它强调的是用组合/聚合的方式来共享一些能用的方法。

![桥接模式](http://img.github.mailjob.net/20210512131801)

## 场景化代码实现

### 场景描述

作为一个高端的汽车品牌，我们可以为客户提供定制化的需求。比如，定制化的颜色，定制化的检测，定制化的引擎 等等。在 **抽象工厂** 设计模式中，我们开发了，针对每个颜色的**车身涂改车间**配备每个对应的**检测车间**。

但是这里有两个问题：1、涂改车间和对应的检测检车的高耦合性问题；2、涂改车间和检测车间的强依赖关系。

在 **桥接模式** 中，我们要做的就是对这个设计模式进行解偶，以便让**涂改车间**和**检测车间**之间**随意组合**。

### 代码实现

首先，我们计划建造3个车身涂改车间，2个检测车间。流程上是车身涂改完成后，可以随意的进入某一个检测车间。

**interface.php**

- 定义车身涂改的接口
- 对于颜色车间：黄色、红色、蓝色，去继承这个接口类，并且实现其中的车身涂改方法

**abstract.php**

- 定义桥接模式的抽象类
- 定义绑定的车身涂改类
- 抽象化检测方法
- 两个检测车间，分别去实现这个检测方法

**bridge.php 测试**

- 将涂改蓝色车身的车间，和2号检测车间，进行组装。测试输出。